# =============================================================================
# CLIProxy Configuration Example
# =============================================================================
# Copy this file to config.yaml and customize as needed.
# Documentation: https://help.router-for.me/
# =============================================================================

# -----------------------------------------------------------------------------
# Server Settings
# -----------------------------------------------------------------------------

# Server host/interface to bind to.
# - "" (empty): Bind all interfaces (IPv4 + IPv6) - accessible from network
# - "127.0.0.1" or "localhost": Local machine only (recommended for security)
host: "127.0.0.1"

# Server port (Dashboard will be available at http://localhost:{port}/static/management.html)
port: 8317

# TLS/HTTPS settings (optional)
tls:
  enable: false
  cert: ""  # Path to certificate file
  key: ""   # Path to private key file

# -----------------------------------------------------------------------------
# Management API & Dashboard
# -----------------------------------------------------------------------------

remote-management:
  # Allow remote (non-localhost) access to management endpoints
  # WARNING: Only enable if you have proper network security
  allow-remote: false

  # Management secret key (required for Dashboard access)
  # - Set a strong, unique value here
  # - If plaintext, it will be hashed on startup
  # - Leave empty to disable Management API entirely
  secret-key: "your-secret-management-key-here"

  # Disable the bundled management control panel
  disable-control-panel: false

  # GitHub repository for control panel updates
  panel-github-repository: "https://github.com/router-for-me/Cli-Proxy-API-Management-Center"

# -----------------------------------------------------------------------------
# Authentication & Security
# -----------------------------------------------------------------------------

# Directory for OAuth tokens and auth files (supports ~ for home directory)
# For Docker, this matches the volume mount path in docker-compose.yml
auth-dir: "/root/.cli-proxy-api"

# API keys that clients use to access THIS proxy
# Add your own keys here - clients will use these to authenticate
api-keys:
  - "sk-your-client-key-1"
  - "sk-your-client-key-2"

# -----------------------------------------------------------------------------
# Logging & Debugging
# -----------------------------------------------------------------------------

# Enable debug logging (verbose output)
debug: false

# Write logs to rotating files instead of stdout
logging-to-file: false

# Maximum total size (MB) of log files. Set 0 to disable cleanup.
logs-max-total-size-mb: 100

# Enable in-memory usage statistics (required for Dashboard analytics)
usage-statistics-enabled: true

# Enable request logging for Dashboard Activity tab
request-log: true

# -----------------------------------------------------------------------------
# Network & Proxy
# -----------------------------------------------------------------------------

# Upstream proxy URL (socks5/http/https)
# Example: socks5://user:pass@192.168.1.1:1080
proxy-url: ""

# Routing strategy for multiple credentials: "round-robin" or "fill-first"
routing:
  strategy: "round-robin"

# Request retry settings
request-retry: 3
max-retry-interval: 30

# Quota exceeded behavior
quota-exceeded:
  switch-project: true      # Switch to another project when quota exceeded
  switch-preview-model: true # Switch to preview model when quota exceeded

# Disable credential cooling (not recommended)
disable-cooling: false

# Require authentication for WebSocket API (/v1/ws)
ws-auth: false

# When true, unprefixed model requests only use credentials without a prefix
force-model-prefix: false

# -----------------------------------------------------------------------------
# API Keys Configuration (Optional - OAuth is preferred)
# -----------------------------------------------------------------------------
# Uncomment and configure if using API keys instead of OAuth login.
# For OAuth setup, use the Dashboard: /static/management.html

# Gemini API keys
# gemini-api-key:
#   - api-key: "AIzaSy..."
#     prefix: ""  # Optional prefix for model routing
#     base-url: "https://generativelanguage.googleapis.com"

# Claude API keys
# claude-api-key:
#   - api-key: "sk-ant-..."

# OpenAI/Codex API keys
# codex-api-key:
#   - api-key: "sk-..."

# OpenAI-compatible providers (e.g., OpenRouter)
# openai-compatibility:
#   - name: "openrouter"
#     base-url: "https://openrouter.ai/api/v1"
#     api-key-entries:
#       - api-key: "sk-or-..."
#     models:
#       - name: "moonshotai/kimi-k2:free"
#         alias: "kimi-k2"

# Vertex AI API keys
# vertex-api-key:
#   - api-key: "vk-..."
#     base-url: "https://example.com/api"

# -----------------------------------------------------------------------------
# Amp CLI Integration (Optional)
# -----------------------------------------------------------------------------

# ampcode:
#   upstream-url: "https://ampcode.com"
#   upstream-api-key: ""
#   restrict-management-to-localhost: false
#   force-model-mappings: false
#   model-mappings:
#     - from: "claude-opus-4.5"
#       to: "claude-sonnet-4"

# -----------------------------------------------------------------------------
# OAuth Provider Excluded Models (Optional)
# -----------------------------------------------------------------------------
# Exclude specific models from OAuth providers using exact match or wildcards.

# oauth-excluded-models:
#   gemini-cli:
#     - "gemini-2.5-pro"
#   claude:
#     - "claude-3-5-haiku-*"
#   codex:
#     - "gpt-5-*"

# -----------------------------------------------------------------------------
# Payload Configuration (Advanced)
# -----------------------------------------------------------------------------
# Modify request payloads before sending to upstream providers.

# payload:
#   default:  # Set parameters only when missing
#     - models:
#         - name: "gemini-*"
#       params:
#         "generationConfig.thinkingConfig.thinkingBudget": 32768
#   override:  # Always set/overwrite parameters
#     - models:
#         - name: "gpt-*"
#       params:
#         "reasoning.effort": "high"
